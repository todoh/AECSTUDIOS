<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESOTICO: AEC STUDIOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Global Reset and Layout */
        html {
            height: 100%;
            overflow-y: hidden; /* Evita la barra de desplazamiento vertical en el elemento html */
        }
        body {
            height: 100vh; /* Altura completa del viewport */
            margin: 0;
            padding: 0;
            overflow: hidden; /* Evita las barras de desplazamiento en el cuerpo */
            font-family: 'Inter', sans-serif;
            display: flex; /* Usa flexbox para el diseño general */
            flex-direction: column; /* Apila el encabezado, el contenido principal y el pie de página verticalmente */
        }

        /* Header and Footer fixed positions */
        header {
            position: fixed; /* Posición fija */
            top: 0;
            width: 100%;
            z-index: 50; /* Asegura que el encabezado esté encima */
            height: 80px; /* Altura consistente para el encabezado */
        }
        @media (min-width: 768px) {
            header {
                height: 96px; /* Mayor altura para escritorio */
            }
        }
        footer {
            position: fixed; /* Posición fija */
            bottom: 0;
            width: 100%;
            z-index: 0; /* Asegura que el pie de página esté encima */
            height: 0px; /* Altura consistente para el pie de página */
        }

        /* Main content area */
        main {
            flex-grow: 1; /* Permite que el contenido principal ocupe todo el espacio vertical disponible */
            overflow-y: hidden; /* Evita el desplazamiento dentro del main, las secciones manejan su propio contenido */
            width: 100%;
            box-sizing: border-box; /* Incluye el padding en el cálculo de ancho/alto */
            padding-top: 80px; /* Espacio para el encabezado fijo (móvil) */
            padding-bottom: 64px; /* Espacio para el pie de página fijo */
            display: flex; /* Usa flex para gestionar las secciones */
            position: relative; /* Para el posicionamiento absoluto de las secciones */
        }
        @media (min-width: 768px) {
            main {
                padding-top: 96px; /* Espacio para el encabezado fijo (escritorio) */
            }
        }

        /* General section styles */
        .section {
            position: absolute; /* Posiciona las secciones absolutamente para superponerlas */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Ocupa la altura completa del main */
            display: flex; /* Usa flex para centrar el contenido dentro de la sección */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
            visibility: hidden; /* Oculta las secciones no activas */
        }
        .section.active {
            opacity: 1;
            transform: translateY(0);
            visibility: visible; /* Muestra la sección activa */
        }
        /* Inner content divs within sections (e.g., project intro, music list) */
        .section > div:not(#artist-slider-container) { /* Excluye el contenedor del slider de esta regla */
            width: 100%;
            max-width: 80%; /* Ancho de contenido estándar */
            margin-left: auto;
            margin-right: auto;
            padding: 2rem; /* Padding estándar para bloques de contenido */
            box-sizing: border-box;
            flex-grow: 1; /* Permite que el contenido crezca */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow-y: auto; /* Permite que el contenido interno se desplace si se desborda */
            -webkit-overflow-scrolling: touch; /* Desplazamiento suave en iOS */
        }
        /* Asegura que overflow-y se aplique correctamente a los hijos directos que contienen contenido */
        #proyecto .bg-zinc-900,
        #musica .bg-zinc-900,
        #escuchar .bg-zinc-900 {
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            max-height: 100%; /* Asegura que el contenido no empuje el contenedor más allá de la altura de la sección */
        }


        /* Artist section specific overrides */
        #artistas {
            padding: 0; /* Sin padding en la sección misma, el contenido dentro de bg-zinc-900 lo tendrá */
        }
        #artistas .artist-section-content { /* Contenedor principal de la sección artistas */
            width: 100%;
            height: 100%; /* Ocupa la altura completa de la sección padre */
            border-radius: 0;
            padding: 0; /* Sin padding aquí, el contenido dentro del wrapper lo tendrá */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            box-sizing: border-box;
            overflow: hidden; /* Oculta la barra de desplazamiento para este contenedor */
            position: relative; /* Contenedor para posicionamiento absoluto de hijos */
        }

        /* Artist Grid View */
        #artist-grid-view {
            /* flex-grow: 1; Removido */
            position: absolute;
            bottom: 5%;
            transform: translateY(-50%);
            left: 0;
            width: 100%;
            height: 125px; /* Altura ajustada para una sola fila de ítems cuadrados */
            background-color: theme('colors.zinc.900'); /* Fondo para opacidad sobre el slider */
            z-index: 2; /* Encima del slider */
            overflow-x: auto; /* Permite el desplazamiento horizontal */
            overflow-y: hidden; /* Oculta el desplazamiento vertical */
            -webkit-overflow-scrolling: touch; /* Desplazamiento suave en iOS */
            display: flex; /* Para centrar #artist-grid verticalmente */
            align-items: center; /* Centra #artist-grid verticalmente */
            padding: 0; /* El padding interno lo gestionará #artist-grid */
        }
        .artist-grid-item {
           
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border-radius: 0.5rem; /* rounded-lg, reducido desde rounded-xl */
            overflow: hidden;
            background-color: theme('colors.zinc.800'); 
            width: 100px; /* Ancho fijo para cada artista */
            flex-shrink: 0; /* Evita que el ítem se encoja en el contenedor flex */
            padding: 0.15rem; /* p-1, padding interno del ítem */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); 
        }

        .artist-grid-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.5);
        }

        .artist-grid-item img {
            width: 100%;
            height: auto; /* La altura se derivará del aspect-ratio */
            aspect-ratio: 1 / 1; /* Hace la imagen cuadrada */
            object-fit: cover;
            border-radius: 0.25rem; /* rounded-md, reducido desde rounded-lg */
            border: 1px solid theme('colors.emerald.500'); /* Borde más fino */
            margin-bottom: 0.25rem; /* mb-1 */
        }
        /* Media queries para altura de imagen eliminadas, aspect-ratio se encarga */

        .artist-grid-item span {
            font-weight: 600; /* semibold */
            color: theme('colors.emerald.300');
            font-size: 0.65rem; /* Reducido para encajar mejor */
            line-height: 1.2; /* Ajustado para el nuevo tamaño de fuente */
            display: block; /* Asegura que el margin-bottom de la imagen tenga efecto */
            width: 100%; /* Para que el text-align center y text-overflow funcionen bien */
            white-space: nowrap; /* Evita que el texto se divida en múltiples líneas */
            overflow: hidden; /* Oculta el texto que desborda */
            text-overflow: ellipsis; /* Añade "..." al texto desbordado */
        }

        /* Estilos para el contenedor de la cuadrícula de artistas */
        #artist-grid {
            display: flex; /* Organiza los ítems en una fila */
            flex-wrap: nowrap; /* Evita que los ítems salten a la siguiente línea */
            gap: 0.75rem; /* Espacio entre ítems (12px) */
            padding: 0.5rem 1rem; /* Padding vertical y horizontal para el contenido de la cuadrícula */
            width: max-content; /* Permite que el contenedor se expanda con los ítems */
        }

        /* Artist Slider Container */
        #artist-slider-view {
            /* flex-grow: 1; Removido */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; /* Tailwind w-full ya lo hace */
            height: 100%; /* Tailwind h-full ya lo hace */
            z-index: 1; /* Debajo de la cuadrícula */
            display: flex; /* Flex para los slides */
            flex-direction: column;
            overflow: hidden; /* Oculta la barra de desplazamiento interna */
        }

        #artist-slider-container {
            width: 100%;
            margin-left: 0;
            margin-right: 0;
            border-radius: 0;
            padding: 0;
            flex-grow: 1; /* Ocupa el espacio vertical restante */
            display: flex; /* Flex para los slides */
            overflow: hidden; /* Oculta la barra de desplazamiento interna */
            position: relative; /* Para el posicionamiento absoluto de botones/puntos */
        }

        /* Artist Slider (the track) */
        #artist-slider {
            display: flex;
            transition: transform 0.7s ease-in-out;
            height: 100%; /* Ocupa la altura completa del contenedor */
            /* El ancho será establecido por JS en función del número de slides */
        }

        /* Individual Artist Slide */
        .artist-slide {
            flex-shrink: 0; /* Evita que se encoja */
            width: 100%; /* Cada slide ocupa el 100% del ancho visible */
            height: 100%; /* Rellena la altura del padre */
            box-sizing: border-box;
            display: flex; /* Flex para centrar el content-wrapper */
            align-items: center; /* Centra verticalmente el content-wrapper */
            justify-content: center; /* Centra horizontalmente el content-wrapper */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            color: white;
        }
        .artist-slide::before { /* Overlay */
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1;
        }

        /* Content Wrapper inside each slide */
        .artist-slide .content-wrapper {
            transform: translateY(-10%);
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column; /* Siempre columna para apilar el nombre en la parte superior */
            align-items: center; /* Centra los elementos horizontalmente */
            justify-content: flex-start; /* Alinea el contenido al inicio para un mejor scroll vertical */
            text-align: center;
            padding: 2rem;
            width: 100%;
            max-width: 1280px; /* Restringe el ancho del contenido */
            box-sizing: border-box;
            max-height: 100%; /* Asegura que el content wrapper no desborde la altura del slide */
            overflow-y: auto; /* Permite el desplazamiento interno si el contenido es demasiado alto */
            -webkit-overflow-scrolling: touch; /* Desplazamiento suave en iOS */
            gap: 1rem; /* Espacio entre el nombre y la fila de imagen/video */
        }

        /* Contenedor para la imagen de perfil y los videos para que estén uno al lado del otro en escritorio */
        .image-and-videos-row {
            
            display: flex;
            flex-direction: column; /* Apila la imagen y los videos en móvil */
            align-items: center; /* Centra los elementos horizontalmente en móvil */
            width: 100%;
            gap: 2rem; /* Espacio entre la sección de información y la cuadrícula de video */
            flex-grow: 1; /* Permite que esta sección crezca */
        }

        @media (min-width: 768px) {
            .image-and-videos-row {
                flex-direction: row; /* Uno al lado del otro en escritorio */
                justify-content: center; /* Centra el bloque completo */
                align-items: center; /* Alinea al centro en el diseño de fila */
                gap: 4rem; /* Espacio entre la imagen de perfil y los videos */
                width: 100%; /* Ocupa el ancho completo del content-wrapper */
            }
            .image-and-videos-row .info-section {
                flex-shrink: 0; /* No se encoge */
                width: 250px; /* Ancho fijo para la sección de información */
                text-align: left; /* Alinea el texto a la izquierda */
            }
            .image-and-videos-row .video-grid {
                flex-grow: 1; /* Permite que la cuadrícula de videos crezca */
                max-width: 700px; /* Ancho máximo para la cuadrícula de videos */
            }
        }

        /* Sección de información (Imagen de perfil + Descripción) */
        .info-section {
            display: flex;
            flex-direction: column;
            align-items: center; /* Centra los elementos horizontalmente en móvil */
            text-align: center;
            flex-shrink: 0; /* Evita que se encoja */
            max-width: 100%; /* Asegura que quepa */
        }

        @media (min-width: 768px) {
            .info-section {
                align-items: flex-start; /* Alinea el texto/imagen a la izquierda en escritorio */
                text-align: left;
            }
        }

        /* Estilos para el image-placeholder (imagen secundaria) */
        .artist-slide .image-placeholder {
            flex-shrink: 0;
            width: 160px; /* Tamaño de la caja de la imagen secundaria */
            height: 160px;
            border-radius: 0.5rem; /* Esquinas redondeadas */
            overflow: hidden; /* Asegura que la imagen no se desborde */
            border: 2px solid theme('colors.emerald.500'); /* Borde esmeralda */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5); /* Sombra para profundidad */
            margin-bottom: 1.5rem; /* Espacio inferior en móvil */
            display: flex; /* Para centrar la imagen */
            align-items: center;
            justify-content: center;
            background-color: theme('colors.zinc.900'); /* Fondo para el placeholder si no hay imagen */
        }
        .artist-slide .image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cubre el área manteniendo la relación de aspecto */
            object-position: center 20%; /* Ajusta el enfoque vertical. Prueba valores como 0% (top), 15%, 25%, o incluso 50% (center) según cómo estén compuestas tus imágenes. */
            display: block;
        }
        @media (min-width: 768px) {
            .artist-slide .image-placeholder {
                width: 200px; /* Tamaño más grande para escritorio */
                height: 200px;
                margin-bottom: 0; /* Sin margen inferior en escritorio */
            }
        }

        /* Animación para elementos del slide */
        .slide-content-element {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .artist-slide.active .slide-content-element {
            opacity: 1;
            transform: translateY(0);
        }
        .artist-slide.active .slide-content-element.video-grid {
            transition-delay: 0.2s; /* Pequeño retraso para los videos */
        }

        /* Video Grid */
        .video-grid {
            width: 100%;
            display: grid; /* Cambiado a grid */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Cuadrícula responsiva */
            gap: 1rem; /* Espacio entre videos */
            max-width: 100%; /* Asegura que no desborde a su padre */
            flex-grow: 1; /* Permite que la cuadrícula de video crezca */
        }
        .video-grid .aspect-video {
            width: 100%;
            padding-bottom: 56.25%; /* Relación de aspecto 16:9 (altura / ancho * 100) */
            position: relative;
            overflow: hidden; /* Asegura que el iframe no se desborde */
        }
        .video-grid iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        @media (min-width: 768px) {
            .video-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 columnas en escritorio */
            }
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-50">

    <header class="bg-black text-gray-100 shadow-xl">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20 sm:h-24">
                <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">AEC STUDIOS presenta <span class="text-emerald-400">ESOTICO</span></h1>
                <nav class="hidden md:flex space-x-6">
                    <button data-target="proyecto" class="nav-link text-gray-300 hover:text-white px-4 py-2 rounded-md text-base font-medium transition-colors duration-200">Proyecto</button>
                    <button data-target="artistas" class="nav-link text-gray-300 hover:text-white px-4 py-2 rounded-md text-base font-medium transition-colors duration-200">Artistas</button>
                    <button data-target="musica" class="nav-link text-gray-300 hover:text-white px-4 py-2 rounded-md text-base font-medium transition-colors duration-200">Música</button>
                    <button data-target="escuchar" class="nav-link text-gray-300 hover:text-white px-4 py-2 rounded-md text-base font-medium transition-colors duration-200">Dónde Escuchar</button>
                </nav>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none">
                        <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden bg-zinc-900">
            <nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button data-target="proyecto" class="nav-link text-gray-300 hover:bg-zinc-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 w-full text-left">Proyecto</button>
                <button data-target="artistas" class="nav-link text-gray-300 hover:bg-zinc-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 w-full text-left">Artistas</button>
                <button data-target="musica" class="nav-link text-gray-300 hover:bg-zinc-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 w-full text-left">Música</button>
                <button data-target="escuchar" class="nav-link text-gray-300 hover:bg-zinc-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 w-full text-left">Dónde Escuchar</button>
            </nav>
        </div>
    </header>

    <main>
        <section id="proyecto" class="section active">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 bg-zinc-900 shadow-2xl rounded-xl p-8 sm:p-10 text-center">
                <h2 class="text-5xl sm:text-6xl font-extrabold text-emerald-400 mb-6 leading-tight">TEMPORADA ESOTICA</h2>
                <p class="text-xl sm:text-2xl text-gray-200 mb-8 max-w-3xl mx-auto">
                    Una colisión de talentos. Un viaje sonoro sin precedentes.
                </p>
                <p class="text-lg text-gray-300 mb-6 max-w-4xl mx-auto">
                    ESOTICO es el resultado de una visión compartida, un proyecto donde la creatividad fluye libremente entre cinco artistas excepcionales. Producido por AEC STUDIOS, esta colaboración busca explorar nuevas dimensiones musicales, fusionando estilos y narrativas para crear una experiencia auditiva única. Descubre la esencia de esta unión artística.
                </p>
            </div>
        </section>

        <section id="artistas" class="section">
             <div class="bg-zinc-900 shadow-2xl rounded-xl artist-section-content">
                <!-- Clases de layout de Tailwind eliminadas, se manejan por CSS -->
                <div id="artist-grid-view" class="w-full">
                    <div id="artist-grid">
                        </div>
                </div>

                <!-- La clase flex-grow se elimina de aquí -->
                <div id="artist-slider-view" class="relative w-full h-full hidden">
                    <button id="back-to-grid" class="absolute top-4 left-4 bg-zinc-700 text-white p-2 rounded-full shadow-lg hover:bg-zinc-600 transition-colors duration-200 focus:outline-none z-20">
                        ← Volver a la Cuadrícula
                    </button>
                    <div id="artist-slider-container" class="relative w-full flex-grow">
                        <div id="artist-slider" class="flex transition-transform duration-700 ease-in-out h-full">
                            </div>
                        <button id="prev-artist" class="absolute left-4 top-1/2 -translate-y-1/2 bg-emerald-600 text-white p-3 rounded-full shadow-lg hover:bg-emerald-700 transition-colors duration-200 focus:outline-none z-10">
                            ❮
                        </button>
                        <button id="next-artist" class="absolute right-4 top-1/2 -translate-y-1/2 bg-emerald-600 text-white p-3 rounded-full shadow-lg hover:bg-emerald-700 transition-colors duration-200 focus:outline-none z-10">
                            ❯
                        </button>
                        <div id="slider-dots" class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2">
                            </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="musica" class="section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 bg-zinc-900 shadow-2xl rounded-xl p-8 sm:p-10">
                 <h2 class="text-5xl sm:text-6xl font-extrabold text-emerald-400 mb-6 leading-tight">Música</h2>
                <p class="text-lg text-gray-300 mb-12 text-center max-w-4xl mx-auto">
                    Aquí encontrarás PROXIMAMENTE una selección de las canciones que definen el sonido de ESOTICO, fruto de la colaboración entre nuestros artistas. Cada tema es una muestra de la diversidad y la sinergia que impulsa este proyecto.
                </p>
                <div id="project-music-list" class="flex flex-wrap justify-center gap-4 text-xl text-gray-200 max-w-2xl mx-auto">
                    </div>
            </div>
        </section>

        <section id="escuchar" class="section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 bg-zinc-900 shadow-2xl rounded-xl p-8 sm:p-10">
                <h2 class="text-5xl sm:text-6xl font-extrabold text-emerald-400 mb-6 leading-tight">Dónde Escuchar</h2>
                <p class="text-lg text-gray-300 mb-12 text-center max-w-4xl mx-auto">
                    Sumérgete en el sonido de ESOTICO en tus plataformas de streaming favoritas.
                </p>
                <div class="space-y-8 max-w-2xl mx-auto">
                    <div>
                        <h3 class="text-3xl font-semibold text-emerald-300 mb-4">Youtube</h3>
                        <ul class="list-disc list-inside space-y-3 text-lg">
                            <li><a href="https://www.youtube.com/@NileSilog" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">NILE SILOG</a></li>
                            <li><a href="https://www.youtube.com/@ZetaKlan" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">Z-KLAN</a></li>
                            <li><a href="https://www.youtube.com/@Lilxusti" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">XUSTY</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-3xl font-semibold text-emerald-300 mb-4">Spotify</h3>
                        <ul class="list-disc list-inside space-y-3 text-lg">
                            <li><a href="https://open.spotify.com/intl-es/artist/4AMhluHVZdsE3dSoSqsy4p" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">NILE SILOG</a></li>
                            <li><a href="https://open.spotify.com/intl-es/artist/39HMzK7IKvCKjrPtOqNEjT" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">Z-KLAN</a></li>
                            <li><a href="https://open.spotify.com/intl-es/artist/1p90pBZ14p7vJ4Rd4Fyem0" target="_blank" rel="noopener noreferrer" class="text-emerald-500 hover:text-emerald-300 hover:underline transition-colors duration-200">DESKUIDAO</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-black text-gray-400 text-center p-8 mt-16">
        <p>© <span id="currentYear"></span> AEC STUDIOS. Todos los derechos reservados.</p>
        <p class="text-sm mt-2">ESOTICO: La fusión de la creatividad.</p>
    </footer>

    <script>
        // Data for all artists, including image URLs and YouTube embed URLs
      const allArtistsData = [
            { name: "Nile Silog", imageUrl: "nilesilogb.jpg", secondaryImageUrl: "nilesilog.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/01E7KrFo13s?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/OcWjsZ3D454?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/Ao75vI2iEhY?autoplay=0&controls=1&showinfo=0&rel=0"], description: "Nile Silog es un artista innovador que fusiona ritmos electrónicos con melodías introspectivas, creando paisajes sonoros únicos. Su visión transforma cada pista en una experiencia inmersiva.", titles: ["Último sigilo", "Talisman", "Ohptimush Praime", "Tetric", "Zona Sureña", "Selva Cálida"] },
            { name: "Z Klan", imageUrl: "zklanb.jpg", secondaryImageUrl: "zklan.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/8_mDpon9Xac?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/txsOaOpx2YI?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/yVirp4ItfBw?autoplay=0&controls=1&showinfo=0&rel=0"], description: "Z Klan aporta una energía cruda y letras poderosas, destacándose por su habilidad para narrar historias complejas con un estilo inconfundible. Su música es un reflejo audaz de la realidad.", titles: ["Ohptimush Praime", "Nueva Era", "Ritmo Urbano"] },
            { name: "Xusty", imageUrl: "xustyb.jpg", secondaryImageUrl: "xusty.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/HSDDRRDlAnk?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/thXQdX4bh9s?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/jNceyUa405g?autoplay=0&controls=1&showinfo=0&rel=0"], description: "Xusty es conocido por su versatilidad y su capacidad para transitar entre géneros con fluidez. Sus composiciones son un equilibrio perfecto entre lo experimental y lo melódico, siempre sorprendiendo a su audiencia.", titles: ["Sueños Lejanos", "Frecuencia", "Luz Interior"] },
            { name: "Deskuidao", imageUrl: "deskuidaob.jpg", secondaryImageUrl: "deskuidao.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/Ree5iCJeQak?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/9RxRy9Iao84?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/34FvkYOmXkI?autoplay=0&controls=1&showinfo=0&rel=0"], description: "Deskuidao se caracteriza por su sonido auténtico y sus letras directas. Con una presencia escénica magnética, sus actuaciones son tan memorables como sus grabaciones, dejando una huella duradera.", titles: ["Revolución", "Caminos Cruzados", "Ecos del Ayer"] },
            { name: "Needyls", imageUrl: "needylsb.jpg", secondaryImageUrl: "needyls.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/D4zY_ZQcyzc?autoplay=0&controls=1&showinfo=0&rel=0", "https://www.youtube.com/embed/NRt_uZSTOtw?autoplay=0&controls=1&showinfo=0&rel=0" ], description: "Needyls es un maestro de la producción y la experimentación sonora. Su trabajo detrás de la mesa de mezclas es tan impresionante como sus propias composiciones, aportando una calidad inigualable a cada proyecto.", titles: ["Profundidad", "Conexión", "El Origen"] },
            { name: "EL COBRE", imageUrl: "elcobreb.jpg", secondaryImageUrl: "elcobre.jpg", youtubeEmbedUrls: ["https://www.youtube.com/embed/pyCsZ_J0q24?autoplay=0&controls=1&showinfo=0&rel=0"  ], description: "EL COBRE trae una propuesta musical fresca y potente, combinando elementos clásicos con sonidos contemporáneos. Su estilo único y su energía en el escenario lo convierten en una fuerza a tener en cuenta.", titles: ["Fuerza Interior", "Renacer", "El Camino"] }
        ];

        // Filter artists to include only those specified for the slider
        const coreArtistsForSlider = ["Nile Silog", "Z Klan", "Deskuidao", "Xusty", "Needyls", "EL COBRE"];
        const esoticoArtistsData = allArtistsData.filter(artist => coreArtistsForSlider.includes(artist.name));

        let currentArtistIndex = 0;
        let isScrolling = false; // Flag to prevent rapid scrolling

        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');
            const artistSlider = document.getElementById('artist-slider');
            const projectMusicListContainer = document.getElementById('project-music-list');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const prevArtistButton = document.getElementById('prev-artist');
            const nextArtistButton = document.getElementById('next-artist');
            const sliderDotsContainer = document.getElementById('slider-dots');
            const artistSliderContainer = document.getElementById('artist-slider-container'); // Get the slider container
            const artistGridView = document.getElementById('artist-grid-view'); // New: Artist Grid View container
            const artistSliderView = document.getElementById('artist-slider-view'); // New: Artist Slider View container
            const artistGrid = document.getElementById('artist-grid'); // New: Artist Grid container
            const backToGridButton = document.getElementById('back-to-grid'); // New: Back to Grid button

            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Function to update active navigation
            function updateActiveNav(targetId) {
                navLinks.forEach(link => {
                    link.classList.remove('bg-emerald-600', 'text-white');
                    link.classList.add('text-gray-300');
                    if (link.getAttribute('data-target') === targetId) {
                        link.classList.add('bg-emerald-600', 'text-white');
                        link.classList.remove('text-gray-300');
                    }
                });
            }
            
            // Function to stop all videos in a given element
            function stopAllVideos(container) {
                container.querySelectorAll('iframe').forEach(iframe => {
                    iframe.src = ''; // Stop video playback
                });
            }

            // Add event listeners to navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const targetId = link.getAttribute('data-target');
                    const currentActiveSection = document.querySelector('.section.active');

                    if (currentActiveSection) {
                        currentActiveSection.classList.remove('active');
                        // Stop videos in the outgoing section if it's 'artistas'
                        if (currentActiveSection.id === 'artistas') {
                            stopAllVideos(currentActiveSection);
                        }
                    }

                    // Show the target section
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.classList.add('active');
                        // Handle 'artistas' section specific display
                        if (targetId === 'artistas') { 
                            showArtistFromGrid(0); // Muestra directamente el slider con Nile Silog (índice 0)
                        }
                    }
                    updateActiveNav(targetId);
                    if (mobileMenu.classList.contains('hidden') === false) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });
            
            // Set initial active navigation link
            updateActiveNav('proyecto');

            // Function to display a specific artist in the slider
            function showArtist(index) {
                const totalArtists = esoticoArtistsData.length;
                // Detiene los videos en el slide actual antes de cambiar
                const currentSlideElement = artistSlider.children[currentArtistIndex];
                if (currentSlideElement) {
                    currentSlideElement.querySelectorAll('iframe').forEach(iframe => {
                        iframe.src = ''; // Detiene la reproducción del video
                    });
                    currentSlideElement.classList.remove('active'); // Elimina la clase de animación
                }

                currentArtistIndex = (index + totalArtists) % totalArtists;
                if (artistSlider && artistSliderContainer) {
                    const slideWidth = artistSliderContainer.offsetWidth; // Obtiene el ancho actual del contenedor del slider
                    // Asegura que cada slide individualmente tenga el ancho correcto
                    // Esto es crucial para que el flexbox distribuya los slides uniformemente
                    Array.from(artistSlider.children).forEach(slide => {
                        slide.style.width = `${slideWidth}px`;
                    });
                    artistSlider.style.width = `${totalArtists * slideWidth}px`; // Establece el ancho total para el contenedor flex
                    artistSlider.style.transform = `translateX(-${currentArtistIndex * slideWidth}px)`;
                }
                updateDots();

                // Inicia los videos y la animación en el nuevo slide activo
                const newSlideElement = artistSlider.children[currentArtistIndex];
                if (newSlideElement) {
                    newSlideElement.classList.add('active'); // Añade la clase de animación
                    const iframes = newSlideElement.querySelectorAll('iframe');
                    const artistData = esoticoArtistsData[currentArtistIndex];
                    iframes.forEach((iframe, idx) => {
                        if (artistData.youtubeEmbedUrls && artistData.youtubeEmbedUrls[idx]) {
                            let videoSrc = artistData.youtubeEmbedUrls[idx];
                            iframe.src = videoSrc;
                        }
                    });
                }
            }

            // Function to update slider dots
            function updateDots() {
                if (sliderDotsContainer) {
                    sliderDotsContainer.innerHTML = '';
                    esoticoArtistsData.forEach((_, idx) => {
                        const dot = document.createElement('button');
                        dot.className = `w-3 h-3 rounded-full mx-1 transition-colors duration-300 ${idx === currentArtistIndex ? 'bg-emerald-400' : 'bg-gray-600 hover:bg-gray-400'}`;
                        dot.addEventListener('click', () => showArtist(idx));
                        sliderDotsContainer.appendChild(dot);
                    });
                }
            }

            // Generate artist slides dynamically
            if (artistSlider) {
                esoticoArtistsData.forEach(artist => {
                    const slide = document.createElement('div');
                    slide.className = 'artist-slide'; // Base class for the slide
                    slide.style.backgroundImage = `url(${artist.imageUrl})`; // Set background image
                    
                    const contentWrapper = document.createElement('div');
                    contentWrapper.className = 'content-wrapper'; // Always flex-col, centered

                    // Artist name (Top)
                    const artistName = document.createElement('h3');
                    artistName.className = 'text-4xl sm:text-5xl font-bold text-emerald-300 mb-6 slide-content-element';
                    artistName.textContent = artist.name;
                    contentWrapper.appendChild(artistName);
                    
                    // Container for profile image and videos (Bottom row)
                    const imageAndVideosRow = document.createElement('div');
                    imageAndVideosRow.className = 'image-and-videos-row slide-content-element';

                    // Info section (Profile image + Description) - Left/Top
                    const infoSection = document.createElement('div');
                    infoSection.className = 'info-section'; // flex-col, responsive alignment

                    const imagePlaceholder = document.createElement('div');
                    imagePlaceholder.className = 'image-placeholder'; 
                    if (artist.secondaryImageUrl) {
                        const secondaryImg = document.createElement('img');
                        secondaryImg.src = artist.secondaryImageUrl;
                        secondaryImg.alt = `Image of ${artist.name}`;
                        imagePlaceholder.appendChild(secondaryImg);
                    } else {
                        const imgText = document.createElement('span');
                        imgText.className = 'text-gray-400 text-sm italic';
                        imgText.textContent = 'No image provided'; 
                        imagePlaceholder.appendChild(imgText);
                    }
                    infoSection.appendChild(imagePlaceholder);

                    const artistDescription = document.createElement('p');
                    artistDescription.className = 'text-base text-gray-300 mt-4 max-w-xs sm:max-w-sm'; // Max width for readability
                    artistDescription.textContent = artist.description || 'Artist description not available.';
                    infoSection.appendChild(artistDescription);
                    
                    imageAndVideosRow.appendChild(infoSection);

                    // Video Grid - Right/Bottom
                    if (artist.youtubeEmbedUrls && artist.youtubeEmbedUrls.length > 0) {
                        const videoGrid = document.createElement('div');
                        videoGrid.className = 'video-grid slide-content-element';
                        artist.youtubeEmbedUrls.forEach(videoUrl => {
                            const videoContainer = document.createElement('div');
                            videoContainer.className = 'aspect-video rounded-lg overflow-hidden shadow-xl border border-zinc-700';
                            const iframe = document.createElement('iframe');
                            iframe.src = ""; // Set empty initially, loaded in showArtist
                            iframe.width = "100%";
                            iframe.height = "100%";
                            iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
                            iframe.allowFullscreen = true;
                            iframe.frameBorder = "0";
                            videoContainer.appendChild(iframe);
                            videoGrid.appendChild(videoContainer);
                        });
                        imageAndVideosRow.appendChild(videoGrid);
                    }
                    
                    contentWrapper.appendChild(imageAndVideosRow);
                    slide.appendChild(contentWrapper);
                    artistSlider.appendChild(slide);
                });
            }

            // New: Function to render the artist grid
            function renderArtistGrid() {
                if (artistGrid) {
                    artistGrid.innerHTML = ''; // Clear existing grid items
                    esoticoArtistsData.forEach((artist, index) => {
                        const gridItem = document.createElement('div');
                        gridItem.className = 'artist-grid-item';
                        gridItem.dataset.index = index; // Store the index for easy lookup

                        const img = document.createElement('img');
                        img.src = artist.secondaryImageUrl || `https://placehold.co/400x400/065f46/ffffff?text=${artist.name}`; // Fallback placeholder
                        img.alt = `Imagen de ${artist.name}`;
                        gridItem.appendChild(img);

                        const nameSpan = document.createElement('span');
                        nameSpan.textContent = artist.name;
                        gridItem.appendChild(nameSpan);

                        gridItem.addEventListener('click', () => showArtistFromGrid(index));
                        artistGrid.appendChild(gridItem);
                    });
                }
            }

            // New: Function to show the slider from the grid view
            function showArtistFromGrid(index) {
                artistGridView.classList.add('hidden'); // Ocultar la cuadrícula cuando se muestra el slider
                artistSliderView.classList.remove('hidden'); // Show the slider
                currentArtistIndex = index; // Set the current artist index
                showArtist(currentArtistIndex); // Show the selected artist in the slider
            }

            // Add event listeners to artist navigation buttons
            if (prevArtistButton) {
                prevArtistButton.addEventListener('click', () => showArtist(currentArtistIndex - 1));
            }
            if (nextArtistButton) {
                nextArtistButton.addEventListener('click', () => showArtist(currentArtistIndex + 1));
            }

            // New: Add event listener for the "Back to Grid" button
            if (backToGridButton) {
                backToGridButton.addEventListener('click', () => {
                    artistSliderView.classList.add('hidden'); // Hide the slider
                    artistGridView.classList.remove('hidden'); // Show the grid
                    stopAllVideos(artistSliderView); // Stop any playing videos in the slider
                });
            }

            // Slider navigation with mouse wheel
            if (artistSliderContainer) {
                artistSliderContainer.addEventListener('wheel', (event) => {
                    if (isScrolling) return; // Prevent rapid scrolling
                    isScrolling = true;

                    event.preventDefault(); // Prevent page scrolling

                    if (event.deltaY > 0) {
                        // Scrolling down, go to next artist
                        showArtist(currentArtistIndex + 1);
                    } else {
                        // Scrolling up, go to previous artist
                        showArtist(currentArtistIndex - 1);
                    }

                    setTimeout(() => {
                        isScrolling = false;
                    }, 500); // Delay time in milliseconds
                }, { passive: false }); // Use passive: false to allow preventDefault
            }

            // Populate the project music list
            if (projectMusicListContainer) {
                const allProjectSongs = new Set();
                allArtistsData.forEach(artist => {
                    if (artist.titles) {
                        artist.titles.forEach(title => allProjectSongs.add(title));
                    }
                });
                
                Array.from(allProjectSongs).sort().forEach(song => {
                    const li = document.createElement('li');
                    li.textContent = song;
                    projectMusicListContainer.appendChild(li);
                });
            }
            
            // Toggle mobile menu
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // Recalculate slider position on window resize
            window.addEventListener('resize', () => {
                // Only re-center if the slider is currently visible
                if (!artistSliderView.classList.contains('hidden')) {
                    showArtist(currentArtistIndex); // Re-center the current slide
                }
            });

            // Initial setup: Render the grid and ensure the 'artistas' section starts with the grid view
            renderArtistGrid();
            // The 'proyecto' section is active by default, so 'artistas' should be hidden initially.
            // When 'artistas' is navigated to, the nav-link click handler will manage its visibility.
        });

        // This function is not currently used, can be removed or kept if planning to use for dynamic text formatting
        function formatLabel(str, maxLength) {
            if (!str) return '';
            if (str.length <= maxLength) return str;
            
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';

            for (const word of words) {
                if ((currentLine + word).length > maxLength && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            if (currentLine.trim().length > 0) {
                lines.push(currentLine.trim());
            }
            return lines.length > 0 ? lines : [str];
        }

    </script>
</body>
</html>
